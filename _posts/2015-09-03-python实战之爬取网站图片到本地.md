---
layout: post
title: python实战之爬取网站图片到本地
categories: ['coding']
tags: ['python', '爬虫']
published: True
img: 26

---

wocao

>{% highlight python linenos %}
#coding=utf-8
import re
import os
import urllib

def getHtml(url):
    page = urllib.urlopen(url)
    html = page.read()
    return html

def getImg(html):
    print "I'm trying to get sexy images......"
    print "The images I'll get will be placed in dir D://imgs_from_yinwoods"
    reg = r'src="(.+?\.jpg)"'
    imgre = re.compile(reg)
    imglist = re.findall(imgre, html)
    x = 0
    path = os.path.join("D:/", "imgs_from_yinwoods")
    os.makedirs(path)
    for imgurl in imglist:
        urllib.urlretrieve(imgurl, 'D://imgs_from_yinwoods/%s.jpg' % x)
        x += 1
        print ("I've got %d images" % x)
        if x > 99:
        	return

html = getHtml("http://www.imgjav.com/explore")

print getImg(html)

{% endhighlight %}