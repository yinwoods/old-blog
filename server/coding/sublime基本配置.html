<!DOCTYPE html>
<html lang="cn">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<link rel="dns-prefetch" href="//hm.baidu.com"/>
	<link rel="dns-prefetch" href="//disqus.com"/>
	<link rel="dns-prefetch" href="//a.disquscdn.com"/>

	<meta name="Keywords" content="yinwoods,殷成涛,个人博客,郑州大学,tools,linux"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
	<meta content="yes" name="apple-mobile-web-app-capable" />
	<meta content="black" name="apple-mobile-web-app-status-bar-style" />
	<meta content="telephone=no" name="format-detection" />
	
	<meta name="author" content="yinwoods">

	<link rel="alternate" type="application/rss+xml" title="yinwoods Feed" href="/rss.xml" />
	<link rel="apple-touch-icon-precomposed" href="/img/icon.png">
	<link rel="apple-touch-icon-precomposed" href="/img/icon-16.png" sizes="16x16" />
	<link rel="apple-touch-icon-precomposed" href="/img/icon-24.png" sizes="24x24" />
	<link rel="apple-touch-icon-precomposed" href="/img/icon-32.png" sizes="32x32" />
	<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">

    <title>sublime基本配置 | yinwoods</title>
  
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/rouge.css">
	<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
	<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
		(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
		e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
		})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

		_st('install','csxq-8xzb6tiaQ1dQaGs','2.0.0');
	</script>
</head>


<body>
	<div id="container" class="container">
		<div id="content" class="content">
						<nav class="navbar">
				<div class="pull-left">
					<button id="btnMenu" type="button" class="btn btn-default btn-sm btn-menu">
						<span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>	菜 单
					</button>
				</div>
				<ul class="pull-center">
					<li class="active"><a href="/">博客</a></li>
                    <li><a href="/about.html">关于我</a></li>
				</ul>
				<div class="pull-right">
					<button type="button" class="btn btn-default btn-sm btn-list">
						<a href="/book-movie-list/booklist.html">
							<span class="glyphicon glyphicon-list-alt"></span> 书单/影单  
						</a>
					</button>
				</div>
			</nav>

			<header class="post-header">
        <div class="hd-img">
                <img src="http://7xlh6u.com1.z0.glb.clouddn.com/bg28.jpg" alt="背景图片">
        </div>

        <div class="title">
           <h1>sublime基本配置</h1>
        </div>
</header>
<button id="btnArrow" class="btn-arrow" data-info="点击显示文章"><i class="icon icon-arrow-down">&#xe619;</i></button>
<div class="post-title">
	<h1>sublime基本配置</h1>
	
	<p>作者: <a target="_blank" href="http://blog.yinwoods.com/"><strong>yinwoods</strong></a>&nbsp;&nbsp;&nbsp;
		分类: <a target="_blank" href="http://blog.yinwoods.com/coding.html"><strong>coding</strong></a>&nbsp;&nbsp;&nbsp;
		日期: <strong>2015年09月07日</strong>&nbsp;&nbsp;&nbsp;
         <ul class="tags post-tags">
            
            
            
                
            
                
            
            
            
                
            
                
            
            
            
                
            
                
            
            
            
                
            
                
            
            
            
                
                    <li><a href="/tags/tools/index.html">tools<span>5</span></a></li>
                
            
                
            
            
            
                
            
                
                    <li><a href="/tags/linux/index.html">linux<span>3</span></a></li>
                
            
            
            
                
            
                
            
            
            
                
            
                
            
            
            
                
            
                
            
            
            
                
            
                
            
            
            
                
            
                
            
            
            
                
            
                
            
            
            </ul></p>
</div>
    

    <article class="post-content">
        <hr class="post-end-left"><p class="post-end">开始</p><hr class="post-end-right"/>
        <div>
            <p>这几天一直在捯饬linux系统，免不了重装了几次，每次装好都要配置sublime。查资料的过程真是无限头痛啊，特意开这篇博客以备不时之需。</p>

<p>首先从管网下载sublime3安装包，基于ubuntu的linux可以直接装，其他的也有办法，这个比较简单，就不多说了。</p>

<p>安装完成之后首先输入注册码，免得时不时地提醒（博主穷学生一枚，鼓励有能力的同学去买<a href="https://www.sublimetext.com/buy">购买地址</a>）</p>

<p>在网上搜集的一份注册码如下：</p>

<p><code>
—– BEGIN LICENSE —–
Andrew Weber
Single User License
EA7E-855605
813A03DD 5E4AD9E6 6C0EEB94 BC99798F
942194A6 02396E98 E62C9979 4BB979FE
91424C9D A45400BF F6747D88 2FB88078
90F5CC94 1CDC92DC 8457107A F151657B
1D22E383 A997F016 42397640 33F41CFC
E1D0AE85 A0BBD039 0E9C8D55 E1B89D5D
5CDB7036 E56DE1C0 EFCC0840 650CD3A6
B98FC99C 8FAC73EE D2B95564 DF450523
—— END LICENSE ——
</code></p>

<p>注册成功之后，我们要解决linux下sublime不能输入中文的问题
这里我主要参考了以下两篇文章：</p>

<blockquote>
<p>1、<a href="http://blog.isming.me/2014/03/15/jie-jue-ubuntuxia-sublime-text-3zhong-wen-shu-ru-de-wen-ti/">解决Ubuntu下Sublime text 3中文输入的问题</a></p>

<p>2、<a href="http://jingyan.baidu.com/article/f3ad7d0ff8731609c3345b3b.html">Ubuntu下Sublime Text 3解决无法输入中文的方法</a></p>
</blockquote>

<p>这两篇文章只有一起看才可以起效果。。。</p>

<ul>
<li>1、首先我们在sublime安装目录下<code>/opt/sublime_text/</code>创建sublime_imfix.c如下：</li>
</ul>

<div>
  <pre><code class='CPP'>/*
sublime-imfix.c
Use LD_PRELOAD to interpose some function to fix sublime input method support for linux.
By Cjacker Huang &lt;jianzhong.huang at i-soft.com.cn&gt;

gcc -shared -o libsublime-imfix.so sublime_imfix.c  `pkg-config --libs --cflags gtk+-2.0` -fPIC
LD_PRELOAD=./libsublime-imfix.so sublime_text
*/
#include &lt;gtk/gtk.h&gt;
#include &lt;gdk/gdkx.h&gt;
typedef GdkSegment GdkRegionBox;

struct _GdkRegion
{
      long size;
      long numRects;
      GdkRegionBox *rects;
      GdkRegionBox extents;
};

GtkIMContext *local_context;

void
gdk_region_get_clipbox (const GdkRegion *region,
        GdkRectangle    *rectangle)
{    
      g_return_if_fail (region != NULL);
      g_return_if_fail (rectangle != NULL);

      rectangle-&gt;x = region-&gt;extents.x1;
      rectangle-&gt;y = region-&gt;extents.y1;
      rectangle-&gt;width = region-&gt;extents.x2 - region-&gt;extents.x1;
      rectangle-&gt;height = region-&gt;extents.y2 - region-&gt;extents.y1;
      GdkRectangle rect;
      rect.x = rectangle-&gt;x;
      rect.y = rectangle-&gt;y;
      rect.width = 0;
      rect.height = rectangle-&gt;height; 
      //The caret width is 2; 
      //Maybe sometimes we will make a mistake, but for most of the time, it should be the caret.
      if(rectangle-&gt;width == 2 &amp;&amp; GTK_IS_IM_CONTEXT(local_context)) {
        gtk_im_context_set_cursor_location(local_context, rectangle);
      }
}

//this is needed, for example, if you input something in file dialog and return back the edit area
//context will lost, so here we set it again.

static GdkFilterReturn event_filter (GdkXEvent *xevent, GdkEvent *event, gpointer im_context)
{
    XEvent *xev = (XEvent *)xevent;
    if(xev-&gt;type == KeyRelease &amp;&amp; GTK_IS_IM_CONTEXT(im_context)) {
           GdkWindow * win = g_object_get_data(G_OBJECT(im_context),&quot;window&quot;);
           if(GDK_IS_WINDOW(win))
             gtk_im_context_set_client_window(im_context, win);
    }
    return GDK_FILTER_CONTINUE;
}

void gtk_im_context_set_client_window (GtkIMContext *context,
      GdkWindow    *window)
{
      GtkIMContextClass *klass;
      g_return_if_fail (GTK_IS_IM_CONTEXT (context));
      klass = GTK_IM_CONTEXT_GET_CLASS (context);
      if (klass-&gt;set_client_window)
    klass-&gt;set_client_window (context, window);

      if(!GDK_IS_WINDOW (window))
    return;
      g_object_set_data(G_OBJECT(context),&quot;window&quot;,window);
      int width = gdk_window_get_width(window);
      int height = gdk_window_get_height(window);
      if(width != 0 &amp;&amp; height !=0) {
        gtk_im_context_focus_in(context);
        local_context = context;
      }
      gdk_window_add_filter (window, event_filter, context); 
}</code></pre>
</div>

<ul>
<li>2、安装C/C++的编译环境和gtk libgtk2.0-dev</li>
</ul>

<blockquote>
<p><code>
sudo    apt-get install build-essential
sudo apt-get install libgtk2.0-dev
</code></p>
</blockquote>

<ul>
<li>3、编译共享内存</li>
</ul>

<blockquote>
<p><code>
gcc -shared -o libsublime-imfix.so sublime_imfix.c  `pkg-config --libs --cflags gtk+-2.0` -fPIC
</code></p>
</blockquote>

<ul>
<li>4、启动测试</li>
</ul>

<blockquote>
<p><code>
export LD_PRELOAD=./libsublime-imfix.so sublime_text
</code></p>
</blockquote>

<ul>
<li>5、修改我们的desktop文件，使图标也可以使用，内容如下（<strong>注意路径</strong>）:</li>
</ul>

<blockquote>
<p><code>
sudo vim /usr/share/applications/sublime-text.desktop
</code></p>

<p><code>
[Desktop Entry]
Version=1.0
Type=Application
Name=Sublime Text
GenericName=Text Editor
Comment=Sophisticated text editor for code, markup and prose
Exec=bash -c &quot;LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text %F&quot;
Terminal=false
MimeType=text/plain;
Icon=sublime-text
Categories=TextEditor;Development;
StartupNotify=true
Actions=Window;Document;
[Desktop Action Window]
Name=New Window
Exec=bash -c &quot;LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text -n&quot;
OnlyShowIn=Unity;
[Desktop Action Document]
Name=New File
Exec=bash -c &quot;LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text --command new_file&quot;
OnlyShowIn=Unity;
</code></p>
</blockquote>

<ul>
<li>6、修改文件/usr/bin/subl的内容，将文件内容替换为（<strong>注意路径</strong>）：</li>
</ul>

<blockquote>
<p>```</p>

<h1>!/bin/sh</h1>

<p>LD<em>PRELOAD=/opt/sublime</em>text/libsublime-imfix.so exec /opt/sublime<em>text/sublime</em>text &quot;$@&quot;
```</p>
</blockquote>

<p>下面就开始配置我们的神器插件<code>Package Control</code>了</p>

<blockquote>
<ul>
<li><p>1、<code>ctrl+～</code>（Esc下面那个键）同时按住，弹出一个输入框，粘贴下面代码，回车。我使用的版本是sublime text3.</p></li>
<li><p>2、<div>
<pre><code class='ruby'>import urllib.request,os; pf = &#39;Package Control.sublime-package&#39;; ipp = sublime.installed<em>packages</em>path(); urllib.request.install<em>opener( urllib.request.build</em>opener( urllib.request.ProxyHandler()) ); open(os.path.join(ipp, pf), &#39;wb&#39;).write(urllib.request.urlopen( &#39;http://sublime.wbond.net/&#39; + pf.replace(&#39; &#39;,&#39;%20&#39;)).read())</code></pre>
</div></p></li>
<li><p>3、附带sublime text2的代码：<div>
<pre><code class='ruby'>import urllib2,os; pf=&#39;Package Control.sublime-package&#39;; ipp = sublime.installed<em>packages</em>path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install<em>opener( urllib2.build</em>opener( urllib2.ProxyHandler( ))); open( os.path.join( ipp, pf), &#39;wb&#39; ).write( urllib2.urlopen( &#39;http://sublime.wbond.net/&#39; +pf.replace( &#39; &#39;,&#39;%20&#39; )).read()); print( &#39;Please restart Sublime Text to finish installation&#39;)</code></pre>
</div></p></li>
</ul>
</blockquote>

<p>下面就可以通过<code>Package Control</code>安装各种插件了</p>

        </div>
        <hr class="post-end-left"><p class="post-end">结束</p><hr class="post-end-right"/>
        <div class="post-footer">
            
            <p class="post-footer-previous">上一篇 ： <a class="entry-more" href="/coding/python%E5%AE%9E%E6%88%98%E4%B9%8B%E9%83%91%E5%B7%9E%E5%A4%A7%E5%AD%A6GPA%E8%AE%A1%E7%AE%97%E5%99%A8.html">python实战之郑州大学GPA计算器</a></p>
            
            
            <p class="post-footer-next">下一篇 ： <a class="entry-more" href="/coding/python%E7%BB%83%E4%B9%A0%E5%86%8C%E4%B9%8B0000-%E4%B8%BA%E5%9B%BE%E7%89%87%E6%B7%BB%E5%8A%A0%E6%96%87%E5%AD%97.html">python练习册之【0000-为图片添加文字】</a></p>
            
        </div>
    <!-- JiaThis Button BEGIN -->
    <div class="jiathis_style">
        <span style="font-family:sans-serif; color:#009966">分享到：</span>
        <a class="jiathis_button_weixin share_button" href="#"></a>
        <a class="jiathis_button_tsina share_button" href="#"></a>
        <a class="jiathis_button_qzone share_button" href="#"></a>
        <a class="jiathis_button_evernote share_button" href="#"></a>
        <a class="jiathis_button_ydnote share_button" href="#"></a>
        <a class="jiathis_button_pocket share_button" href="#"></a>
        <a class="jiathis_button_douban share_button" href="#"></a>
        <a class="jiathis_button_renren share_button" href="#"></a>
        <a class="jiathis_button_fb share_button" href="#"></a>
        <a class="jiathis_button_linkedin share_button" href="#"></a>
        <a class="jiathis_button_googleplus share_button" href="#"></a>
        <a class="jiathis_button_tumblr share_button" href="#"></a>
        <a class="jiathis_counter_style"></a>
    </div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/totop.js" charset="utf-8"></script>
<!-- JiaThis Button END -->
</article>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'yinwoods'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    



		</div>
					<footer class="footer">
				<div class="row">
					<div class="pull-left">
						<a class="avatar" href="/" title="yinwoods">yinwoods</a>
                        			<p class="copyright">2015 ALL RIGHTS RESERVED</p>
					</div>
					
					<div class="pull-center">
						<h4>Powered by <a target="_blank" href="https://github.com/yinwoods">github</a> && <a target="_blank" href="http://jekyllrb.com/">jekyll</a></h4>
					</div>
				</div>
			</footer>

				<nav id="menu" class="menu">
			<ul>
				<li class="logo"><a href="about.html"><img  class="img-circle" height="100px" width="100px" src="/img/about/me.png"></a></li>

				<li><a href="/index.html"><span class="glyphicon glyphicon-home"></span></i> 首页 </a></li>
				
				<li><a href="/coding.html"><span class="glyphicon glyphicon-road"></span></i>  编程之路 </a></li>

				<li><a href="/myshare.html"><span class="glyphicon glyphicon-gift"></span>  我的分享 </a></li>
				
				<li><a href="/diary.html"><span class="glyphicon glyphicon-calendar"></span></i>  生活日志 </a></li>
				
				<li><a href="/book-movie-list/booklist.html"><span class="glyphicon glyphicon-inbox"></span></i>  书单/影单  </a></li>

				<li><a href="/about.html"><span class="glyphicon glyphicon-sunglasses"></span></i>  关于博主 </a></li>

				<li><a href="/friend.html"><span class="glyphicon glyphicon-send"></span></i> 我的朋友 </a></li>

				<li><img class="img-rounded" height="100px" width="100%" src="/img/about/footer.png"></li>

			</ul>
			<button id="btnClose" class="btn-close"></button>

			<div id="SVGMenu" class="svg-menu" 
                data-menu-open="M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z" 
                data-menu-close="M-6,0h101c0,0-90,153.603-90,396.167C2.167,627.579,100,800,100,800H-1V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z">
				<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 800" preserveAspectRatio="none">
					<path d="M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z"/>
				</svg>
			</div>

		</nav>


		<div id="totop">
    			<a title="返回顶部">返回顶部</a>
		</div>
	</div>

	<script type="text/javascript" src="/js/classie.js"></script>

	<script type="text/javascript" src="/js/snap.svg-min.js"></script>
	<script type="text/javascript" src="/js/menuTriggle.js"></script>
	<script type="text/javascript" src="/js/SVGButton.js"></script>

	<script type="text/javascript" src="/js/postTriggle.js"></script>

	
	<script type="text/javascript" src="/js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="/js/totop.js"></script>
	<script type="text/javascript">
		var content = document.querySelector('.content'),
			footer = document.querySelector('.footer'),
			footT  = footer.offsetTop,
			footH  = footer.offsetHeight,
			winH   = window.innerHeight,
			post   = document.querySelectorAll('p');

		if (footT - footH + 100 < winH) {
			content.style.height = '100%';
		};

		for (var i = 0; i < post.length; i++) {
			if (post.item(i).querySelector('img')) {
				post.item(i).style.textIndent = 0;
			};
		};

	</script>
	<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?eefd87bbdb3a5e21ecb7f319769dd8b9";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</body>
</html>
